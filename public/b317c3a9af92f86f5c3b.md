---
title: '`FASTLANE_SESSION` ç’°å¢ƒå¤‰æ•°ã®ç”Ÿæˆã§ `Spaceship::UnauthorizedAccessError` ã‚¨ãƒ©ãƒ¼'
tags:
  - iOS
  - Apple
  - fastlane
  - spaceauth
private: false
updated_at: '2023-07-06T09:51:26+09:00'
id: b317c3a9af92f86f5c3b
organization_url_name: null
---
## ã¯ã˜ã‚ã«

`fastlane spaceauth -u {Apple ID}` ã‚’å®Ÿè¡Œã—ã¦ `FASTLANE_SESSION` ç’°å¢ƒå¤‰æ•°ã‚’ç”Ÿæˆã—ã‚ˆã†ã¨ã—ãŸã‚‰ã€6æ¡ã®ç¢ºèªã‚³ãƒ¼ãƒ‰ã®å…¥åŠ›å¾Œã« `Spaceship::UnauthorizedAccessError` ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

ï¼ˆæ¤œç´¢ç”¨ã«å…¨æ–‡è¼‰ã›ã¦ã„ã¾ã™ãŒã€ã‚¨ãƒ©ãƒ¼ã¯ã€ŒPlease enter the 6 digit code:ã€ã‹ã‚‰ã§ã™ï¼‰

```shell-session
$ bundle exec fastlane spaceauth -u {Apple ID}
[âœ”] ğŸš€ 
Logging into to App Store Connect ({Apple ID})...
Available session is not valid any more. Continuing with normal login.
Two-factor Authentication (6 digits code) is enabled for account '{Apple ID}'
More information about Two-factor Authentication: https://support.apple.com/en-us/HT204915

If you're running this in a non-interactive session (e.g. server or CI)
check out https://github.com/fastlane/fastlane/tree/master/spaceship#2-step-verification

(Input `sms` to escape this prompt and select a trusted phone number to send the code as a text message)

(You can also set the environment variable `SPACESHIP_2FA_SMS_DEFAULT_PHONE_NUMBER` to automate this)
(Read more at: https://github.com/fastlane/fastlane/blob/master/spaceship/docs/Authentication.md#auto-select-sms-via-spaceship-2fa-sms-default-phone-number)

Please enter the 6 digit code:
XXXXXX
Requesting session...
Could not login to App Store Connect
Please check your credentials and try again.
This could be an issue with App Store Connect,
Please try unsetting the FASTLANE_SESSION environment variable
(if it is set) and re-run `fastlane spaceauth`

Exception type: Spaceship::UnauthorizedAccessError

Looking for related GitHub issues on fastlane/fastlane...

â¡ï¸  fastlane cert got Unauthorized Access error
    https://github.com/fastlane/fastlane/issues/16108 [open] 31 ğŸ’¬
    an hour ago

â¡ï¸  The request could not be completed because: Unauthorized Access
    https://github.com/fastlane/fastlane/issues/15411 [closed] 22 ğŸ’¬
    08 Jan 2020

â¡ï¸  Unauthorized Access when I use Fastlane pilot upload
    https://github.com/fastlane/fastlane/issues/15125 [closed] 6 ğŸ’¬
    13 Nov 2019

and 16 more at: https://github.com/fastlane/fastlane/search?q=The%20request%20could%20not%20be%20completed%20because%3A%0A%09Unauthorized%20Access&type=Issues&utf8=âœ“

ğŸ”—  You can âŒ˜ + double-click on links to open them directly in your browser.

[!] The request could not be completed because:
        Unauthorized Access
```

è§£æ±ºã«è‹¦æˆ¦ã—ãŸã®ã§ã€å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã—ã¾ã™ã€‚

## çµè«–

`SPACESHIP_2FA_SMS_DEFAULT_PHONE_NUMBER` ç’°å¢ƒå¤‰æ•°ã«ï¼’FAç”¨ã®æºå¸¯é›»è©±ç•ªå·ã‚’è¨­å®šã—ãŸã‚ã¨ã€ `fastlane spaceauth -u {Apple ID}` ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
# ä¾‹ï¼šé›»è©±ç•ªå·ãŒã€Œ080-XXXX-XXXXã€ã®å ´åˆ
$ export SPACESHIP_2FA_SMS_DEFAULT_PHONE_NUMBER=+81-80-XXXX-XXXX
$ fastlane spaceauth -u {Apple ID}
```

Bundlerã§ç®¡ç†ã—ã¦ã„ã‚‹å ´åˆã€å…ˆé ­ã« `bundle exec` ã‚’ä»˜ã‘ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚

## ç’°å¢ƒ

- Fastlaneï¼š2.143.0

## è§£æ±ºç†ç”±

ã‚ã‹ã‚Šã¾ã›ã‚“â€¦ï½—
æ‰‹å‹•ã§6æ¡ã®ç¢ºèªã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹å ´åˆã‚ˆã‚Šã€ã„ã‚ã„ã‚ãªã“ã¨ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã¡ãªã¿ã«ã§ã™ãŒã€ `fastlane init` ã§åŒæ§˜ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã‚‚ã€æœ¬è¨˜äº‹ã®æ–¹æ³•ã§è§£æ±ºã—ã¾ã—ãŸã€‚

## å‚è€ƒãƒªãƒ³ã‚¯

- [`FASTLANE_SESSION` ç’°å¢ƒå¤‰æ•°ã®ç”Ÿæˆæ–¹æ³• - Qiita](https://qiita.com/uhooi/items/4cdd254c7e4e70699b60)
