---
title: ã§ãã‚‹é™ã‚ŠonTapGestureã‚ˆã‚ŠButtonã‚’ä½¿ãŠã†(SwiftUI)
tags:
  - button
  - Swift
  - SwiftUI
private: false
updated_at: '2023-05-11T11:16:46+09:00'
id: 6da919e14f71270eda1b
organization_url_name: dena_coltd
slide: false
---
## ã¯ã˜ã‚ã«

è¡¨é¡Œã®é€šã‚Šã§ã™ã€‚
ã§ãã‚‹é™ã‚Š `onTapGesture { ... }` ã‚ˆã‚Š `Button` ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚

```swift
// ğŸ”º: `onTapGesture` ã‚’ `Button` ã¨ã—ã¦ä½¿ã£ã¦ã„ã‚‹
FooView(foo: foo)
  .onTapGesture {
    print("FooView tapped.")
  }
  .accessibilityAddTraits(.isButton)

// âœ…: `Button` ã‚’ä½¿ã£ã¦ã„ã‚‹
Button {
  print("FooView tapped.")
} label: {
  FooView(foo: foo)
}
```

`Button` ã® `label` ã«ã¯ `View` ã‚’æ¸¡ã›ã‚‹ã®ã§ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚‚ç°¡å˜ã§ã™ã€‚

## ç’°å¢ƒ

- OSï¼šmacOS Ventura 13.3.1
- Xcodeï¼š14.3 (14E222b)
- Swiftï¼š5.8

## ç†ç”±

ã§ãã‚‹é™ã‚Š `onTapGesture { ... }` ã‚ˆã‚Š `Button` ã‚’ä½¿ã†ç†ç”±ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹

[onTapGestureã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developer.apple.com/documentation/swiftui/view/ontapgesture(count:perform:)) ã«ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚

> Note
> 
> If you create a control thatâ€™s functionally equivalent to a Button, use ButtonStyle to create a customized button instead.
> ï¼ˆãƒœã‚¿ãƒ³ã¨åŒç­‰ã®æ©Ÿèƒ½ã‚’æŒã¤ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹å ´åˆã¯ã€ ButtonStyleã‚’ä½¿ç”¨ã—ã¦ã€ä»£ã‚ã‚Šã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚ï¼‰

`Button` ã¨åŒç­‰ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãªã‚‰ `Button` ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚

æœ€åˆã®ä¾‹ã§ã¯ `label` ã« `FooView` ã‚’ãã®ã¾ã¾æ¸¡ã—ã¾ã—ãŸãŒã€ éƒ¨å“åŒ–ã™ã‚‹ãªã‚‰ `ButtonStyle` ã‚’å®Ÿè£…ã™ã‚‹ã®ãŒã„ã„ã¨æ€ã„ã¾ã™ã€‚

[`PrimitiveButtonStyle`](https://developer.apple.com/documentation/swiftui/primitivebuttonstyle) ã‚’ä½¿ã†ã®ãŒã„ã„ã¨ã®ã“ã¨ã§ã™ã€‚

https://twitter.com/noppefoxwolf/status/1655990280305393665

https://twitter.com/noppefoxwolf/status/1656152888203444224

### ã‚¿ãƒƒãƒ—æ™‚ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒä»˜ã

å€‹äººçš„ã«ã¯ `Button` ã‚’ä½¿ã†ä¸€ç•ªã®ç†ç”±ã§ã™ã€‚
`onTapGesture` ã ã¨ã‚¿ãƒƒãƒ—æ™‚ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒä»˜ã‹ãªã„ã®ã§ã€ã‚¿ãƒƒãƒ—ã—ãŸã‹ã©ã†ã‹ãŒã‚ã‹ã‚Šã¥ã‚‰ã„ã§ã™ã€‚
`Button` ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒä»˜ãã¾ã™ã€‚

ãŸã  `ButtonStyle` ã‚’è‡ªä½œã™ã‚‹å ´åˆã€ãƒã‚¤ãƒ©ã‚¤ãƒˆå‡¦ç†ã‚’è‡ªå‰ã§å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```diff_swift:FloatingActionButtonStyle.swift
struct FloatingActionButtonStyle: ButtonStyle {
    let backgroundColor: Color
    let foregroundColor: Color

    func makeBody(configuration: Configuration) -> some View {
        configuration.label
            .frame(width: 56, height: 56)
            .foregroundColor(foregroundColor)
            .background(backgroundColor)
            .cornerRadius(16)
+           .opacity(configuration.isPressed ? 0.5 : 1)
    }
}
```

ã¨ã„ã£ã¦ã‚‚1è¡Œã®ã¿ã®å®Ÿè£…ã§æ¸ˆã¿ã¾ã™ã€‚
Swift Playgroundsã§ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ä½¿ã£ã¦ `ButtonStyle` ã‚’ä½œã‚‹ã¨ã€æœ€åˆã‹ã‚‰æ›¸ã‹ã‚Œã¦ã„ã‚‹å‡¦ç†ã§ã™ã€‚

## ãŠã‚ã‚Šã«

ã‚¿ãƒƒãƒ—æ™‚ã®å‡¦ç†ã« `onTapGesture` ã‚’ä½¿ã£ã¦ã„ãŸã‚‰ã€ãœã² `Button` ã«ç½®ãæ›ãˆã¦ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒä»˜ããƒ©ã‚¤ãƒ•ã‚’é€ã‚Šã¾ã—ã‚‡ã† :relaxed:

## å‚è€ƒãƒªãƒ³ã‚¯

- [Highlight on FAB by uhooi Â· Pull Request #146 Â· uhooi/Loki](https://github.com/uhooi/Loki/pull/146)
