---
title: Lombokã®Builderãƒ‘ã‚¿ãƒ¼ãƒ³è§£èª¬
tags:
  - Java
  - Lombok
  - Builder
private: false
updated_at: '2019-12-05T09:42:28+09:00'
id: bb817e7ca7dc128bf475
organization_url_name: null
slide: false
---
## ã¯ã˜ã‚ã«

æœ¬è¨˜äº‹ã¯ [Java Advent Calendar 2019](https://qiita.com/advent-calendar/2019/java) ã®3æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
Lombokã®Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

## ã€ŒBuilderãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã¨ã¯ï¼Ÿ

ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸€ç¨®ã§ã€ç”Ÿæˆå‡¦ç†ã‚’ç©ã¿ä¸Šã’ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
å‡¦ç†ã‚’ç©ã¿ä¸Šã’ã¦ç”Ÿæˆã—ã¦ã„ãæ§˜å­ã‹ã‚‰ã€ŒBuilder(å»ºç¯‰è€…)ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã¨å‘¼ã°ã‚Œã¦ã„ã¾ã™ã€‚

GoFã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚‚Builderãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚Šã¾ã™ãŒã€ã€ŒBuilderã€ãŒæŠ½è±¡ã‚¯ãƒ©ã‚¹ã§ã€ŒConcreteBuilder(å…·ä½“çš„å»ºç¯‰è€…)ã€ã‚„ã€ŒDirector(ç›£ç£è€…)ã€ãŒå­˜åœ¨ã—ã¾ã™ã€‚
ãã‚Œã«å¯¾ã—ã€Lombokã®Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã¯å…·ä½“çš„ãªã€ŒBuilderã€ã®ã¿å­˜åœ¨ã—ã¾ã™ã€‚
ã“ã®ã‚ˆã†ã«ç°¡æ½”ãªBuilderãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã€ŒEffective Javaã€ã¨ã„ã†æœ¬ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

## ç’°å¢ƒ

- Javaï¼š10.0.2
- IDEï¼šIntelliJ IDEA 2019.2.3 (Community Edition)
- Lombok pluginï¼š0.27-2019.02

## Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã®é©ç”¨æ–¹æ³•

Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
Lombokã§ã¯ã€ã‚¯ãƒ©ã‚¹ã« `@Builder` ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§BuilderãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

å¤–éƒ¨ã‹ã‚‰ã®å¤‰æ›´ã‚’é˜²ããŸã‚ã€å„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã« `private` ã‚„ `final` ã‚’ä»˜ã‘ã¦ã„ã¾ã™ã€‚

```java:FooFooFooDto.java
import lombok.Builder;

@Builder
final class FooFooFooDto {
    private final String title;
    private final int number;
    private final boolean isFoo;
}
```

ã“ã®å®Ÿè£…ã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

<details><summary>Lombokã§è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰</summary><div>

```java
final class FooFooFooDto {
    private final String title;
    private final int number;
    private final boolean isFoo;

    FooFooFooDto(String title, int number, boolean isFoo) {
        this.title = title;
        this.number = number;
        this.isFoo = isFoo;
    }

    public static FooFooFooDtoBuilder builder() {
        return new FooFooFooDtoBuilder();
    }

    public static class FooFooFooDtoBuilder {
        private String title;
        private int number;
        private boolean isFoo;

        FooFooFooDtoBuilder() {
        }

        public FooFooFooDto.FooFooFooDtoBuilder title(String title) {
            this.title = title;
            return this;
        }

        public FooFooFooDto.FooFooFooDtoBuilder number(int number) {
            this.number = number;
            return this;
        }

        public FooFooFooDto.FooFooFooDtoBuilder isFoo(boolean isFoo) {
            this.isFoo = isFoo;
            return this;
        }

        public FooFooFooDto build() {
            return new FooFooFooDto(title, number, isFoo);
        }

        public String toString() {
            return "FooFooFooDto.FooFooFooDtoBuilder(title=" + this.title + ", number=" + this.number + ", isFoo=" + this.isFoo + ")";
        }
    }
}
```

</div></details>

## è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®ã‚¯ãƒ©ã‚¹å›³

ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’èª­ã‚“ã§ã‚‚é ­ã«å…¥ã‚Šã«ãã„ãŸã‚ã€ã‚¯ãƒ©ã‚¹å›³ã‚’ä½œæˆã—ã¾ã—ãŸã€‚

PlantUMLã§è¡¨ç¾ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã™ãŒã€FooFooFooDtoBuilderã‚¯ãƒ©ã‚¹ã¯staticã§ã™ã€‚
é–¢é€£ã® `+--` ã¯å…¥ã‚Œå­ã«ãªã£ã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ä»Šå›ã ã¨FooFooFooDtoBuilderã‚¯ãƒ©ã‚¹ã¯FooFooFooDtoã‚¯ãƒ©ã‚¹ã®å†…éƒ¨ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

![FooFooFooDto.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/138245/b6f694d9-c2d0-f334-b568-31d35d95fa7a.png)

è¿½åŠ ã•ã‚ŒãŸå…¨å‡¦ç†ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
ç‰¹ã«è¦‹ã¦ã»ã—ã„å‡¦ç†ã¯ __å¤ªå­—__ ã§è¡¨ã—ã¦ã„ã¾ã™ã€‚

- FooFooFooDtoã‚¯ãƒ©ã‚¹
  - å…¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å€¤ã‚’ä»£å…¥ã™ã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿  
  ã‚¯ãƒ©ã‚¹å›³ã§ã¯è¡¨ç¾ã—ã¦ã„ãªã„
  - __Builderã‚’è¿”ã™ `builder()` ãƒ¡ã‚½ãƒƒãƒ‰__
- __FooFooFooDtoBuilderã‚¯ãƒ©ã‚¹__
  - ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿  
  ã‚¯ãƒ©ã‚¹å›³ã§ã¯è¡¨ç¾ã—ã¦ã„ãªã„
  - å…¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
  - __å…¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã‚»ãƒƒã‚¿ãƒ¼__  
  ãƒ¡ã‚½ãƒƒãƒ‰åã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã¨åŒç­‰  
  æˆ»ã‚Šå€¤ã« `this` ã‚’è¿”ã™
  - __ç”Ÿæˆã—ãŸã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¦è¿”ã™ `build()` ãƒ¡ã‚½ãƒƒãƒ‰__
  - `toString()` ãƒ¡ã‚½ãƒƒãƒ‰  

## Builderã‚’ç”¨ã„ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç”Ÿæˆæ–¹æ³•

ä»¥ä¸‹ã®æ‰‹é †ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

1. `builder()` ãƒ¡ã‚½ãƒƒãƒ‰ã§Builderã‚’ç”Ÿæˆã™ã‚‹
2. ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã§ç”Ÿæˆå‡¦ç†(=ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã‚»ãƒƒãƒˆ)ã‚’ç©ã¿ä¸Šã’ã‚‹
3. `build()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹

```java:Builderã‚’ç”¨ã„ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç”Ÿæˆ
final var fooFooFooDto = FooFooFooDto.builder() // 1. Builderã‚’ç”Ÿæˆã™ã‚‹
    .title("ãƒ†ã‚¹ãƒˆ") // 2. ç”Ÿæˆå‡¦ç†ã‚’ç©ã¿ä¸Šã’ã‚‹
    .number(1)
    .isFoo(true)
    .build(); // 3. ãƒ“ãƒ«ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹
```

ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã‚»ãƒƒã‚¿ãƒ¼ã§ `this` (ã“ã“ã§ã¯FooFooFooDtoBuilder)ã‚’è¿”ã™ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã€ã“ã‚Œã«ã‚ˆã‚Šãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚
ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒåŒåãªã®ã‚‚ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚

ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚
![FooFooFooDtoImage.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/138245/25dd3cc9-0eb4-af43-6b52-cb7032e5ed76.png)

## ãƒ¡ãƒªãƒƒãƒˆ

### ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç”Ÿæˆå‡¦ç†ãŒã‚¹ãƒƒã‚­ãƒªã™ã‚‹

ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆæœŸåŒ–ã§ãã‚‹ãŸã‚ã€å¤‰æ•°åã‚’æ¯å›æ›¸ã‹ãšã«ã‚¹ãƒƒã‚­ãƒªã—ã¾ã™ã€‚
Setterã§ã‚»ãƒƒãƒˆã™ã‚‹ã¨æ¯å›å¤‰æ•°åã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```java:Setterã‚’ä½¿ç”¨
final var fooFooFooDto = new FooFooFooDto();
fooFooFooDto.setTitle("ãƒ†ã‚¹ãƒˆ");
fooFooFooDto.setNumber(1);
fooFooFooDto.isFoo(true);
```

```java:Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨
final var fooFooFooDto = FooFooFooDto.builder()
    .title("ãƒ†ã‚¹ãƒˆ")
    .number(1)
    .isFoo(true)
    .build();
```

### ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä»–ã§å¤‰æ›´ã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºç´„ã§ãã‚‹

Setterã§ã‚»ãƒƒãƒˆã™ã‚‹ã¨ãƒãƒ©ãƒãƒ©ã«æ›¸ã‘ã¦ã—ã¾ã„ã¾ã™ã€‚

```java:Setterã ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã„ã¤ã§ã‚‚å¤‰æ›´ã§ãã‚‹
final var fooFooFooDto = new FooFooFooDto();
// â€¦
// ã„ã‚ã„ã‚ãªå‡¦ç†
// â€¦
fooFooFooDto.setTitle("ãƒ†ã‚¹ãƒˆ");
// â€¦
// ã„ã‚ã„ã‚ãªå‡¦ç†
// â€¦
fooFooFooDto.setNumber(1);
// â€¦
// ã„ã‚ã„ã‚ãªå‡¦ç†
// â€¦
fooFooFooDto.isFoo(true);
```

ãƒãƒ©ãƒãƒ©ã«æ›¸ã‘ã‚‹ã¨ã€è¿½ã†ã®ã«æ™‚é–“ãŒã‹ã‹ã£ã¦å¯èª­æ€§ãŒä¸‹ãŒã‚Šã¾ã™ã€‚
ã‚‚ã—ã¾ã¨ã¾ã£ã¦æ›¸ã‹ã‚Œã¦ã„ã¦ã‚‚ã€ä»–ã§å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹æ‰‹é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚

### ã©ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆæœŸåŒ–ã—ã¦ã„ã‚‹ã‹ã‚ã‹ã‚Šã‚„ã™ã„

ãŠæ°—ã¥ãã®æ–¹ã‚‚ã„ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ä¸Šè¨˜ã®2ã¤ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§è§£æ±ºã§ãã¾ã™ã€‚

```java:ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ä½¿ç”¨
final var fooFooFooDto = new FooFooFooDto("ãƒ†ã‚¹ãƒˆ", 1, true);
```

ã—ã‹ã—ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯å‘¼ã³å‡ºã—æ™‚ã«å¼•æ•°åã‚’æ›¸ã‘ãªã„ã®ã§ã€ã©ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆæœŸåŒ–ã—ã¦ã„ã‚‹ã‹ã‚ã‹ã‚Šã¥ã‚‰ã„ã§ã™ã€‚
å¼•æ•°ã‚’æ›¸ãé †ç•ªã‚‚æ±ºã¾ã£ã¦ã„ã¦ã€å¥½ããªé †ç•ªã§åˆæœŸåŒ–ã§ãã¾ã›ã‚“ã€‚

```java:ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã¯å¼•æ•°ã®é †ç•ªãŒæ±ºã¾ã£ã¦ã„ã‚‹
final var fooFooFooDto = new FooFooFooDto("ãƒ†ã‚¹ãƒˆ", 1, true); // `(1, "ãƒ†ã‚¹ãƒˆ", true)` ã¨ã¯æ›¸ã‘ãªã„
```

Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã™ã‚‹ã¨ã€ã©ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆæœŸåŒ–ã—ã¦ã„ã‚‹ã‹ã‚ã‹ã‚Šã‚„ã™ãã€åˆæœŸåŒ–ã™ã‚‹é †ç•ªã‚‚è‡ªç”±ã«æ±ºã‚ã‚‰ã‚Œã¾ã™ã€‚

```java:Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯åˆæœŸåŒ–ã™ã‚‹é †ç•ªãŒè‡ªç”±
final var fooFooFooDto = FooFooFooDto.builder()
    .title("ãƒ†ã‚¹ãƒˆ")
    .number(1)
    .isFoo(true)
    .build();

final var fooFooFooDto = FooFooFooDto.builder()
    .number(1) // åˆæœŸåŒ–ã™ã‚‹é †ç•ªã‚’å¤‰ãˆã‚‰ã‚Œã‚‹
    .title("ãƒ†ã‚¹ãƒˆ")
    .isFoo(true)
    .build();
```

å¼•æ•°ãŒå¤šã„ã¨æ¸¡ã™é †ç•ªãŒã‚ã‹ã‚‰ãªããªã‚Šã¾ã™ãŒã€Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã ã¨ãã‚ŒãŒã‚ã‚Šã¾ã›ã‚“ã€‚

```java:å¼•æ•°ãŒå¤šãã¦ã‚‚å®Ÿè£…ã—ã‚„ã™ã„
// ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ä½¿ç”¨
// ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©ã‚’è¡Œãæ¥ã—ãªã„ã¨å®Ÿè£…ã—ã¥ã‚‰ã„
final var manyFooDto = new ManyFooDto("ãƒ†ã‚¹ãƒˆ", 1, true, 2, 3, 4, false, true, false);

// Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨
final var manyFooDto = ManyFooDto.builder()
    .title("ãƒ†ã‚¹ãƒˆ")
    .number(1)
    .isFoo(true)
    .number2(2)
    .number3(3)
    .number4(4)
    .isBar(false)
    .isHoge(true)
    .isFuga(false)
    .build();
```

IDEã«ã‚ˆã£ã¦ã¯å¼•æ•°åãŒè¡¨ç¤ºã•ã‚Œã€Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã—ãªãã¦ã‚‚å®Ÿè£…ã—ã‚„ã™ã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
ãã‚Œã§ã‚‚ã€ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ãªã©IDEã‚’ä½¿ã‚ãªã„ã¨ãã¯å¯èª­æ€§ãŒä½ã„ã¾ã¾ãªã®ã§ã€Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã¯åŠ¹æœçš„ã§ã™ã€‚

### ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ãŒã‚«ãƒƒã‚³ã„ã„

__ã“ã‚ŒãŒä¸€ç•ªã®ãƒ¡ãƒªãƒƒãƒˆã§ã™__ ã€‚(ç§èª¿ã¹)
ã‚„ã¯ã‚Šãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã§æ›¸ã‘ã‚‹ã¨ã‚«ãƒƒã‚³ã„ã„ã§ã™ã€‚
Stream APIã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ã‚«ãƒƒã‚³ã‚ˆã•ãŒå¢—ã—ã¾ã™ã€‚

```java:é©å½“ãªã‚«ãƒƒã‚³ã„ã„å‡¦ç†
final var fooFooFooDtoList = barDtoList
    .stream()
    .filter(Objects::nonNull)
    .map(it -> {
        return FooFooFooDto.builder()
            .title(it.title)
            .number(it.number)
            .isFoo(true)
            .build();
    })
    .collect(Collectors.toList());
```

## ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

###Â åŒä¸€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’newã§ãã‚‹

è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã¯ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ãŒä»˜ã‹ãªã„ãŸã‚ã€åŒä¸€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã ã¨ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿çµŒç”±ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã§ãã¦ã—ã¾ã„ã¾ã™ã€‚
ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ `private` ã«ã™ã‚Œã°è§£æ±ºã§ãã¾ã™ãŒã€ä½•ã‹ãã†ã—ãªã„ç†ç”±ãŒã‚ã‚‹ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

```java:åŒä¸€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã¨newã§ãã‚‹
final var fooFooFooDto = new FooFooFooDto("ãƒ†ã‚¹ãƒˆ", 1, true);
```

[ã‚³ãƒ¡ãƒ³ãƒˆ](https://qiita.com/uhooi/items/bb817e7ca7dc128bf475#comment-86928fa25b1a31d03dcf) ã‚’é ‚ã„ã¦çŸ¥ã£ãŸã®ã§ã™ãŒã€ `@Builder` ã¯å†…éƒ¨ã§ `@AllArgsConstructor` ã¨åŒç­‰ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚
ã‚¢ã‚¯ã‚»ã‚¹ãƒ¬ãƒ™ãƒ«ã‚’ `private` ã«ã—ãŸ `AllArgsConstructor` ã‚’ç”Ÿæˆã™ã‚Œã°ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿çµŒç”±ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒç”Ÿæˆã•ã‚Œã‚‹ã“ã¨ã‚’é˜²ã’ã¾ã™ã€‚

```java:ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æ˜ç¤ºçš„ã«privateã«ã™ã‚‹
import lombok.AccessLevel; // è¿½åŠ 
import lombok.AllArgsConstructor; // è¿½åŠ 
import lombok.Builder;

@Builder
@AllArgsConstructor(access = AccessLevel.PRIVATE) // è¿½åŠ 
public final class FooFooFooDto {
    private final String title;
    private final int number;
    private final boolean isFoo;
}
```

<details><summary>Lombokã§è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰</summary><div>

```java:FooFooFooDto.java
public final class FooFooFooDto {
    private final String title;
    private final int number;
    private final boolean isFoo;

    // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒ `private` ã«ãªã‚‹
    private FooFooFooDto(String title, int number, boolean isFoo) {
        this.title = title;
        this.number = number;
        this.isFoo = isFoo;
    }

    public static FooFooFooDtoBuilder builder() {
        return new FooFooFooDtoBuilder();
    }

    public static class FooFooFooDtoBuilder {
        private String title;
        private int number;
        private boolean isFoo;

        FooFooFooDtoBuilder() {
        }

        public FooFooFooDto.FooFooFooDtoBuilder title(String title) {
            this.title = title;
            return this;
        }

        public FooFooFooDto.FooFooFooDtoBuilder number(int number) {
            this.number = number;
            return this;
        }

        public FooFooFooDto.FooFooFooDtoBuilder isFoo(boolean isFoo) {
            this.isFoo = isFoo;
            return this;
        }

        public FooFooFooDto build() {
            return new FooFooFooDto(title, number, isFoo);
        }

        public String toString() {
            return "FooFooFooDto.FooFooFooDtoBuilder(title=" + this.title + ", number=" + this.number + ", isFoo=" + this.isFoo + ")";
        }
    }
}
```

</div></details>

ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç”Ÿæˆæ–¹æ³•ãŒè¤‡æ•°ã‚ã‚‹ã¨æ··ä¹±ã™ã‚‹ã®ã§ã€ã“ã¡ã‚‰ã®å®Ÿè£…ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã—ã¦ã»ã—ã„ã§ã™â€¦ã€‚

[ã‚³ãƒ¡ãƒ³ãƒˆ](https://qiita.com/uhooi/items/bb817e7ca7dc128bf475#comment-19fd181093fba6ee17cb) ã‚’é ‚ã„ã¦çŸ¥ã£ãŸã®ã§ã™ãŒã€Builderã®Javadocã«ã¯ã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ `private` ã€ã¨æ›¸ã‹ã‚Œã¦ã„ã¾ã™ï½—
https://github.com/rzwitserloot/lombok/blob/master/src/core/lombok/Builder.java#L36

[Issue](https://github.com/rzwitserloot/lombok/issues/1182) ãŒä¸ŠãŒã£ã¦ã„ã¾ã™ãŒã€å…¨éƒ¨èª­ã‚“ã§ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ `package private` ã®ç†ç”±ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ã€Œä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ç¶™æ‰¿ã—ã¦Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã—ãŸã„ãŸã‚ã€ã¨ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã—ãŸãŒã€ãã®å ´åˆã¯ `public` ã«ã—ãªã„ã¨ã„ã‘ãªã„ã®ã§â€¦ã€‚


### ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åˆæœŸåŒ–ã‚’å¼·åˆ¶ã§ããªã„

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åˆæœŸåŒ–ã‚’å¼·åˆ¶ã§ãã¾ã™ãŒã€Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯å¼·åˆ¶ã§ãã¾ã›ã‚“ã€‚

```java:ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åˆæœŸåŒ–ã‚’å¼·åˆ¶ã§ããªã„
final var fooFooFooDto = FooFooFooDto.builder()
    .title("ãƒ†ã‚¹ãƒˆ")
    .number(1)
    // `isFoo` ãŒåˆæœŸåŒ–ã•ã‚Œã¦ãªãã¦ã‚‚ãƒ“ãƒ«ãƒ‰ã§ãã‚‹
    .build();
```

ã‚ã¨ã‹ã‚‰è¿½åŠ ã—ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åˆæœŸåŒ–ã‚’å¿˜ã‚Œã‚„ã™ã„ãŸã‚ã€é »ç¹ã«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã™ã‚‹ã‚¯ãƒ©ã‚¹ã«ã¯é©ç”¨ã—ãªã„æ–¹ãŒã‚ˆã•ãã†ã§ã™ã€‚

## Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç”¨é€”

ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘æ¸¡ã™ãŸã‚ã ã‘ã«ä½¿ã†DTOã«é©ç”¨ã™ã‚‹ã¨åŠ¹æœçš„ã§ã™ã€‚

## å¿œç”¨ï¼šGetterã‚’è¿½åŠ ã™ã‚‹

ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¯ `privte` ã¨ `final` ã‚’ä»˜ã‘ã¦ã„ã‚‹ãŸã‚ã€ã“ã®ã¾ã¾ã ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ã‚’å–å¾—ã§ãã¾ã›ã‚“ã€‚
ã‚¯ãƒ©ã‚¹ã« `@Getter` ã‚’ä»˜ã‘ã‚‹ã¨å…¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«GetterãŒè¿½åŠ ã•ã‚Œã‚‹ã®ã§ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚

```java:FooFooFooDto.java
import lombok.Builder;
import lombok.Getter;

@Builder
@Getter // è¿½åŠ 
final class FooFooFooDto {
    private final String title;
    private final int number;
    private final boolean isFoo;
}
```

ã‚‚ã—å¤–éƒ¨ã«å…¬é–‹ã—ãŸããªã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã”ã¨ã«Getterã‚’ä»˜ã‘ã‚Œã°OKã§ã™ã€‚

```java:FooFooFooDto.java
import lombok.Builder;
import lombok.Getter;

@Builder
final class FooFooFooDto {
    @Getter //è¿½åŠ 
    private final String title;

    private final int number; // Getterã‚’ä»˜ã‘ãªã‘ã‚Œã°éš è”½ã•ã‚Œã‚‹

    @Getter // è¿½åŠ 
    private final boolean isFoo;
}
```

## å¿œç”¨ï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã™ã‚‹

ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã« `@Builder.Default` ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã§ãã¾ã™ã€‚
`final` ã‚’ä»˜ã‘ã¦ã„ã¦ã‚‚ä½¿ãˆã‚‹ã®ã§ä¾¿åˆ©ã§ã™ã€‚

```java:FooFooFooDto.java
import lombok.Builder;
import lombok.Getter;

@Builder
final class FooFooFooDto {
    private final String title;

    @Builder.Default // è¿½åŠ 
    private final int number = 1;

    private final boolean isFoo;
}
```

ãªãœ `final` ã‚’ä»˜ã‘ã¦ã„ã¦ã‚‚ä½¿ãˆã‚‹ã®ã‹ã¯ã€è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨ã‚ã‹ã‚Šã¾ã™ã€‚

<details><summary>Lombokã§è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰</summary><div>

```java
final class FooFooFooDto {
    private final String title;
    private final int number;
    private final boolean isFoo;

    FooFooFooDto(String title, int number, boolean isFoo) {
        this.title = title;
        this.number = number;
        this.isFoo = isFoo;
    }

    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¿”ã™ãƒ¡ã‚½ãƒƒãƒ‰
    private static int $default$number() {
        return 1;
    }

    public static FooFooFooDtoBuilder builder() {
        return new FooFooFooDtoBuilder();
    }

    public static class FooFooFooDtoBuilder {
        private String title;
        private int number;
        private boolean number$set; // ã‚»ãƒƒãƒˆã—ãŸã‹ã©ã†ã‹ã‚’booleanå‹ã§æŒã¤
        private boolean isFoo;

        FooFooFooDtoBuilder() {
        }

        public FooFooFooDto.FooFooFooDtoBuilder title(String title) {
            this.title = title;
            return this;
        }

        public FooFooFooDto.FooFooFooDtoBuilder number(int number) {
            this.number = number;
            this.number$set = true; // ã‚»ãƒƒãƒˆã—ãŸã‚‰ `true` ã«ã™ã‚‹
            return this;
        }

        public FooFooFooDto.FooFooFooDtoBuilder isFoo(boolean isFoo) {
            this.isFoo = isFoo;
            return this;
        }

        public FooFooFooDto build() {
            // ã‚»ãƒƒãƒˆã—ã¦ã„ãªã„å ´åˆã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§åˆæœŸåŒ–ã™ã‚‹
            return new FooFooFooDto(title, number$set ? number : FooFooFooDto.$default$number(), isFoo);
        }

        public String toString() {
            return "FooFooFooDto.FooFooFooDtoBuilder(title=" + this.title + ", number=" + this.number + ", isFoo=" + this.isFoo + ")";
        }
    }
}
```

</div></details>

## å¿œç”¨ï¼šç¶™æ‰¿ã—ã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹ã«Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã™ã‚‹

ç¶™æ‰¿ã—ã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹ã«Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è€ƒæ…®ã—ãªã„ãŸã‚ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

å®Ÿè£…ã‚’å·¥å¤«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ä»¥ä¸‹ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚
https://www.baeldung.com/lombok-builder-inheritance

## ãŠã‚ã‚Šã«

Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã‚ˆã•ãŒã‚ã‹ã‚Šã€å®Ÿéš›ã«å–ã‚Šå…¥ã‚Œã¦ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ğŸ˜Š

ä»¥ä¸Šã€ [Java Advent Calendar 2019](https://qiita.com/advent-calendar/2019/java) ã®3æ—¥ç›®ã®è¨˜äº‹ã§ã—ãŸã€‚
æ˜æ—¥ã¯ [@n_slender](https://qiita.com/n_slender) ã•ã‚“ã®è¨˜äº‹ã§ã™ã€‚

## å‚è€ƒè³‡æ–™

- [@Builder](https://projectlombok.org/features/Builder)
- [Builderãƒ‘ã‚¿ãƒ¼ãƒ³ - ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³å…¥é–€ - ITå°‚ç§‘](http://www.itsenka.com/contents/development/designpattern/builder.html)
- å¢—è£œæ”¹è¨‚ç‰ˆJavaè¨€èªã§å­¦ã¶ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³å…¥é–€  
p.89
