---
title: ForEachã§å€¤ã®ã»ã‹ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚‚ä½¿ã†æ–¹æ³•(SwiftUI)
tags:
  - Swift
  - SwiftUI
private: false
updated_at: '2022-12-05T12:20:12+09:00'
id: 180068e9b27e4b85fc9e
organization_url_name: dena_coltd
slide: false
---
## ã¯ã˜ã‚ã«

æœ¬è¨˜äº‹ã¯ [SwiftUI Advent Calendar 2022](https://qiita.com/advent-calendar/2022/swiftui) ã®4æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
æ˜¨æ—¥ã¯ @fus1ondev ã•ã‚“ã§ [ã€macOSã€‘SwiftUIã ã‘ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼å¸¸é§ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†](https://qiita.com/fus1ondev/items/020bb96d01ae57afed48) ã§ã—ãŸã€‚

SwiftUI ã® `ForEach` ã§ã€å€¤ã®ã»ã‹ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚‚ä½¿ã†æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

## ç’°å¢ƒ

- OSï¼šmacOS Ventura 13.0.1
- Xcodeï¼š14.1 (14B47b)
- Swiftï¼š5.7.1

## çµè«–

å…ˆã«çµè«–ã§ã™ã€‚

[Swift Algorithms](https://github.com/apple/swift-algorithms) ã® [indexed()](https://github.com/apple/swift-algorithms/blob/195e0316d7ba71e134d0f6c677f64b4db6160c46/Guides/Indexed.md) ã‚’ä½¿ã„ã¾ã™ã€‚

Swift Algorithmsã¯AppleãŒæä¾›ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€2021/09ã«å®‰å®šç‰ˆã®1.0.0ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ã§ã€å®Ÿå‹™ã§ã‚‚å®‰å¿ƒã—ã¦ä½¿ã£ã¦ã„ã„ã¨æ€ã„ã¾ã™ã€‚

```diff_swift:MonsterView.swift
+ import Algorithms

struct MonstersView: View {
  let monsters: [Monster] = [.init(name: "uhooi", description: "")]

  var body: some View {
-   ForEach(monsters) { monster in
-     Text(monster.name)
+   ForEach(monsters.indexed(), id: \.index) { monsterIndex, monster in
+     Text("No.\(monsterIndex): \(monster.name)")
  }
}
```

## ç†ç”±

ä¸€è¦‹ã™ã‚‹ã¨ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã ã‘ã‚’ãƒ«ãƒ¼ãƒ—ã•ã›ã‚‹æ–¹æ³•ã§ã‚‚å•é¡Œãªã•ãã†ã§ã™ã€‚

```diff_swift
// ğŸ”º
ForEach(0..<monsters.count, id: \.self) { monsterIndex in
  let monster = monsters[monsterIndex]
  // ...
}
```

ã—ã‹ã—é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ä¸å®‰å®šã§ã‚ã‚Šã€é€”ä¸­ã§é…åˆ—ã®ä¸­èº«ãŒå¤‰ã‚ã‚‹ã¨ã€è¦ç´ ã‚’æ­£ã—ãç‰¹å®šã§ããªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

## ä»–ã®æ–¹æ³•

ä»–ã®æ–¹æ³•ã‚‚ç´¹ä»‹ã—ã¾ã™ã€‚

```swift
// Swift Algorithmsã‚’ä½¿ã‚ãªã„
ForEach(Array(monsters.enumrated()), id: \.offset) { monsterIndex, monster in
  // ...
}

// è‡ªä½œã®æ§‹æ–‡ã‚’ä½¿ã†
ForEachIndex(monsters, id: \.index) { monsterIndex, monster in
  // ...
}
```

`enumrated()` ã‚’ä½¿ã†ã¨ã€Swift Algorithmsã‚’å°å…¥ã›ãšã«æ¨™æº–ã®APIã®ã¿ã§å®Ÿç¾ã§ãã¾ã™ã€‚
ãŸã ã‚‚ã—ã‹ã—ãŸã‚‰ãƒ‡ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
çŸ¥ã£ã¦ã„ã‚‹äººãŒã„ãŸã‚‰æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚

`ForEachIndex` ã¯ @YusukeHosonuma ã•ã‚“ãŒè‡ªä½œã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚

https://gist.github.com/YusukeHosonuma/7acca14c22b38f1ed5a139ed686fc6c4

## ãŠã¾ã‘: ã©ã‚Œã‚’ä½¿ã†ã¹ãã‹

ãƒˆãƒ“ã•ã‚“ãŒ `ForEachIndex` ã‚’ä½¿ã†ã¹ãã‹ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚’å–ã£ã¦ã„ã¾ã—ãŸã€‚

https://twitter.com/tobi462/status/1599224763339411457

çµæœã¯ã€Œä½¿ã‚ãªã„ã»ã†ãŒã„ã„ã€ãŒ43.3%ã§1ä½ã§ã™ã€‚

ç§ã‚‚ã€Œä½¿ã‚ãªã„ã»ã†ãŒã„ã„ã€ã«æŠ•ç¥¨ã—ã¾ã—ãŸã€‚
ã“ã‚Œã¯ `ForEachIndex` ã®å“è³ªãŒæ‚ªã„ã‚ã‘ã§ã¯ãªãï¼ˆãƒˆãƒ“ã•ã‚“è£½ãªã®ã§å€‹äººçš„ã«ã¯å®‰å¿ƒã—ã¦ä½¿ãˆã¾ã™ï¼‰ã€ã§ãã‚‹é™ã‚Šæ¨™æº–ã®APIã‚’ä½¿ã£ãŸã»ã†ãŒåˆã‚ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹äººãŒèª­ã¿ã‚„ã™ã„ãŸã‚ã§ã™ã€‚

ç§ã¯è–„ã„ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½œã‚‹ã®ãŒã‚ã¾ã‚Šå¥½ãã§ã¯ãªãã€æ˜ã‚‰ã‹ã«å†—é•·ãªã¨ãã®ã¿ä½œã‚Šã¾ã™ã€‚
ä»Šå›ã ã¨ `indexed()` ã‚’ä½¿ã†æ–¹æ³•ã¯å†—é•·ã ã¨æ„Ÿã˜ãªã„ã®ã§ã€ãã®ã¾ã¾ä½¿ã†ã»ã†ãŒå¥½ã¿ã§ã™ã€‚

## ãŠã‚ã‚Šã«

ã“ã‚Œã§ForEachã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒæ¬²ã—ã„ã¨ãã‚‚è¿·ã‚ãšã«å®Ÿè£…ã§ãã¾ã™ :relaxed:

ä»¥ä¸Š [SwiftUI Advent Calendar 2022](https://qiita.com/advent-calendar/2022/swiftui) ã®4æ—¥ç›®ã®è¨˜äº‹ã§ã—ãŸã€‚
æ˜æ—¥ã‚‚ç§ã§ã€Œãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºã®tipsã€ã§ã™ã€‚

## å‚è€ƒãƒªãƒ³ã‚¯

- [Fix ForEach by uhooi Â· Pull Request #9 Â· uhooi/Loki](https://github.com/uhooi/Loki/pull/9)
