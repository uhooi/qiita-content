---
title: é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã€ŒPublishã€ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&ä½¿ã„æ–¹(Swift)
tags:
  - Markdown
  - static_site_generator
  - website
  - Swift
  - publish
private: false
updated_at: '2022-10-31T11:39:34+09:00'
id: 57e040df2f4aa7f62d89
organization_url_name: null
---
ã€ŒPublishã§Webã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ã€ã¯6éƒ¨æ§‹æˆã§ã™ã€‚
è¨˜äº‹ã‚’é †ç•ªã«èª­ã¿é€²ã‚ã‚‹ã¨ã€Publishã§Webã‚µã‚¤ãƒˆãŒæ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ç¬¬1éƒ¨: ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&ä½¿ã„æ–¹ã€€__â†ã‚¤ãƒã‚³ã‚³__
ç¬¬2éƒ¨: [ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ¼ãƒã®ä½œæˆ](https://qiita.com/uhooi/items/111d4439273775586149)
ç¬¬3éƒ¨: [ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://qiita.com/uhooi/items/bf0ff67d687b53a11c5b)
ç¬¬4éƒ¨: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œæˆï¼ˆæœªæŠ•ç¨¿ï¼‰
ç¬¬5éƒ¨: [ãƒ„ã‚¤ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã®è¡¨ç¤º](https://qiita.com/uhooi/items/9aa046f0a42e5afbd7c3)
ç¬¬6éƒ¨: [ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒœã‚¿ãƒ³ã®è¡¨ç¤º](https://qiita.com/uhooi/items/40cb71ac3aca57853544)

## ã€ŒPublishã€ã¨ã¯ï¼Ÿ

Swiftè£½ã®é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚
Swiftã¨Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰HTMLã‚„CSSã‚’ç”Ÿæˆã—ã€GitHub Pagesãªã©ã¸ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

## ç’°å¢ƒ

- OSï¼šmacOS Monterey 12.2.1
- Xcodeï¼š13.3 (13E113)
- Swiftï¼š5.6
- Publishï¼š0.8.0

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### CLIãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Publishã§é™çš„ã‚µã‚¤ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã«ã¯ã€CLIãƒ„ãƒ¼ãƒ«ã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸¡æ–¹ã‚’ä½¿ã„ã¾ã™ã€‚
ã©ã¡ã‚‰ã‚‚1ã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚

```swift:Publishã®Package.swift
let package = Package(
    // ...
    products: [
        .library(name: "Publish", targets: ["Publish"]),
        .executable(name: "publish-cli", targets: ["PublishCLI"])
    ],
    // ...
)
```

å¼•ç”¨ï¼šhttps://github.com/JohnSundell/Publish/blob/9e1b20a23c73ba078966a4fcce23146088d0de63/Package.swift#L14-L15

ç§ã¯CLIãƒ„ãƒ¼ãƒ«ã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æƒãˆãŸã„ã€ã‹ã¤ã©ã¡ã‚‰ã‚‚SwiftPMã§ç®¡ç†ã—ãŸã„ãŸã‚ã€ã¾ãšä»¥ä¸‹ã®ã‚ˆã†ãª `Package.swift` ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚

å¾Œè¿°ã—ã¾ã™ãŒã€ã‚ã¨ã§æ¨ã¦ã‚‹ã®ã§ä¸å¯§ã«ä½œã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

```swift:Package.swift   
// swift-tools-version:5.6

import PackageDescription

let package = Package(
    name: "Tools",
    platforms: [
        .macOS(.v12),
    ],
    dependencies: [
        .package(url: "https://github.com/johnsundell/publish.git", from: "0.8.0"),
    ],
    targets: [.target(name: "Tools", path: "")]
)
```

`Package.swift` ã‚’ä½œæˆã—ãŸã‚‰ã€Publishã®CLIãƒ„ãƒ¼ãƒ«ã‚’ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

```shell-session
$ swift build -c release --product publish-cli
```

ã‚°ãƒ­ãƒ¼ãƒãƒ«ç’°å¢ƒã‚’æ±šã—ãŸããªã„ãŸã‚ã€ãƒ‘ã‚¹ã‚’é€šã•ãšã«ä½¿ã†ã“ã¨ã«ã—ã¾ã™ã€‚
ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã—ãŸCLIãƒ„ãƒ¼ãƒ«ã¯ `.build/release/` ãƒ•ã‚©ãƒ«ãƒ€ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

```shell-session
$ .build/release/publish-cli help
Publish Command Line Interface
------------------------------
Interact with the Publish static site generator from
the command line, to create new websites, or to generate
and deploy existing ones.

Available commands:

- new: Set up a new website in the current folder.
- generate: Generate the website in the current folder.
- run: Generate and run a localhost server on default port 8000
       for the website in the current folder. Use the "-p"
       or "--port" option for customizing the default port.
- deploy: Generate and deploy the website in the current
       folder, according to its deployment method.
```

`publish-cli help` ã‚’å®Ÿè¡Œã—ã¦ã€`new` `generate` `run` `deploy` ã¨ã€ã‚³ãƒãƒ³ãƒ‰ãŒ4ã¤ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ã“ã‚Œã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å®Œäº†ã§ã™ã€‚

### Webã‚µã‚¤ãƒˆã®åŸºç›¤ç”Ÿæˆ

`publish-cli new` ã‚’å®Ÿè¡Œã—ã€Webã‚µã‚¤ãƒˆã®åŸºç›¤ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

`Package.swift` ãªã©ãŒæ®‹ã£ã¦ã„ã‚‹ã¨ç”Ÿæˆã§ããªã„ã®ã§ã€å‰Šé™¤ã—ã¾ã™ã€‚

```shell-session:âŒãƒ•ã‚¡ã‚¤ãƒ«ãŒæ®‹ã£ã¦ã„ã‚‹ã¨ç”Ÿæˆã§ããªã„
$ .build/release/publish-cli new
âŒ New projects can only be generated in empty folders.
```

```shell-session:âœ…ãƒ•ã‚©ãƒ«ãƒ€ãŒç©ºã ã¨ç”Ÿæˆã§ãã‚‹
$ rm -f Package.swift Package.resolved
$ .build/release/publish-cli new
âœ… Generated website project for 'WebsiteSample'
Run 'open Package.swift' to open it and start building
```

æˆåŠŸã™ã‚‹ã¨ `Package.swift` ã‚„ã‚½ãƒ¼ã‚¹ãªã©ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ï¼ˆã™ã”ã„ï¼ï¼‰
`tree` ã‚³ãƒãƒ³ãƒ‰ã ã¨è¦‹ãˆãªã„ã§ã™ãŒ `.gitignore` ã‚‚ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚

```shell-session
$ tree
.
â”œâ”€â”€ Content
â”‚   â”œâ”€â”€ index.md
â”‚   â””â”€â”€ posts
â”‚       â”œâ”€â”€ first-post.md
â”‚       â””â”€â”€ index.md
â”œâ”€â”€ Package.resolved
â”œâ”€â”€ Package.swift
â”œâ”€â”€ Resources
â””â”€â”€ Sources
    â””â”€â”€ WebsiteSample
        â””â”€â”€ main.swift

5 directories, 6 files
```

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯ç¾åœ¨ã®ãƒ•ã‚©ãƒ«ãƒ€åã‚’ã‚¢ãƒƒãƒ‘ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«å¤‰æ›ã—ãŸæ–‡å­—åˆ—ãŒä½¿ã‚ã‚Œã¾ã™ã€‚
ç§ã¯ `website-sample` ãƒ•ã‚©ãƒ«ãƒ€ã§å®Ÿè¡Œã—ãŸãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåãŒ `WebsiteSample` ã«ãªã‚Šã¾ã—ãŸã€‚
å¿…è¦ã«å¿œã˜ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åãªã©ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

æŒ‡ç¤ºé€šã‚Š `open Package.swift` ã‚’å®Ÿè¡Œã—ã€ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’Xcodeã§é–‹ã„ã¦é–‹ç™ºã—ã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ›´æ–°

Publish 0.8.0ç¾åœ¨ã€ç”Ÿæˆã•ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®swift-tools-versionãŒå¤ã‹ã£ãŸã‚Šã™ã‚‹ã®ã§ã€æ›´æ–°ã—ã¾ã™ã€‚

```diff_swift:Package.swift
- // swift-tools-version:5.2
+ // swift-tools-version:5.6

import PackageDescription

let package = Package(
    name: "WebsiteSample",
    products: [
        .executable(
            name: "WebsiteSample",
            targets: ["WebsiteSample"]
        )
    ],
    dependencies: [
-        .package(name: "Publish", url: "https://github.com/johnsundell/publish.git", from: "0.7.0")
+        .package(url: "https://github.com/johnsundell/publish.git", from: "0.8.0")
    ],
    targets: [
-        .target(
+        .executableTarget(
            name: "WebsiteSample",
-            dependencies: ["Publish"]
+            dependencies: [
+                .product(name: "Publish", package: "publish")
+            ]
        )
    ]
)
```

æˆæœç‰©ï¼ˆHTMLãªã©ï¼‰ãŒç”Ÿæˆã•ã‚Œã‚‹ `Output` ãƒ•ã‚©ãƒ«ãƒ€ãŒ `.gitignore` ã«è¨˜è¿°ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€æˆæœç‰©ã‚’Gitç®¡ç†ã—ãªã„å ´åˆã¯è¿½è¨˜ã—ã¾ã™ã€‚

```diff:.gitignore
+ Output
```

å®Ÿè£…ã«ã‚ˆã‚Šã¾ã™ãŒã€æˆæœç‰©ã®ç”Ÿæˆæ™‚ã« `Resources` ãƒ•ã‚©ãƒ«ãƒ€ãŒå­˜åœ¨ã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€ãƒ•ã‚©ãƒ«ãƒ€å†…ã« `.gitkeep` ã‚’è¿½åŠ ã—ã¦ãŠãã¨ã„ã„ã§ã™ã€‚

```shell-session:âŒResourcesãƒ•ã‚©ãƒ«ãƒ€ãŒãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹
$ .build/release/publish-cli generate
[1/1] Planning build
Building for debugging...
[1/3] Emitting module WebsiteSample
[2/3] Compiling WebsiteSample main.swift
[3/3] Linking WebsiteSample
Build complete! (0.51s)
Swift/ErrorType.swift:200: Fatal error: Error raised at top level: Publish encountered an error:
[step] Copy 'Resources' files
[path] Resources
[info] Folder not found
/bin/bash: line 1: 77958 Trace/BPT trap: 5       swift run
âŒ ShellOut encountered an error
Status code: 133
Message: "[1/1] Planning build
Building for debugging...
[1/3] Emitting module WebsiteSample
[2/3] Compiling WebsiteSample main.swift
[3/3] Linking WebsiteSample
Build complete! (0.51s)
Swift/ErrorType.swift:200: Fatal error: Error raised at top level: Publish encountered an error:
[step] Copy 'Resources' files
[path] Resources
[info] Folder not found
/bin/bash: line 1: 77958 Trace/BPT trap: 5       swift run"
Output: ""
make: *** [generate] Error 1
```

`.copyResources()` ã‚’å®Ÿè¡Œã—ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ãªã„ã®ã§ã€å®Ÿè£…ã§ã‚‚é˜²ã’ã¾ã™ã€‚

```diff_swift:âœ….copyResources()ã‚’å®Ÿè¡Œã—ãªã‘ã‚Œã°Resourcesãƒ•ã‚©ãƒ«ãƒ€ãŒãªãã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
try WebsiteSample().publish(using: [
    .addMarkdownFiles(),
-   .copyResources(),
    .generateHTML(withTheme: .foundation),
    .generateRSSFeed(including: [.posts]),
    .generateSiteMap(),
    .deploy(using: .gitHub("uhooi/uhooi.github.io", useSSH: false))
])
```

ã“ã‚Œã‚‰ã®æ›´æ–°ã¯ã™ã¹ã¦Publishã«PRã‚’ä½œæˆã—ãŸã®ã§ã€ãƒãƒ¼ã‚¸ã•ã‚Œã‚Œã°ä¸è¦ã«ãªã‚Šã¾ã™ã€‚

- https://github.com/JohnSundell/Publish/pull/126
- https://github.com/JohnSundell/Publish/pull/127
- https://github.com/JohnSundell/Publish/pull/128
- https://github.com/JohnSundell/Publish/pull/129

### publish-cliã‚³ãƒãƒ³ãƒ‰ã®ãƒ©ãƒƒãƒ—

Webã‚µã‚¤ãƒˆã®å‹•ä½œç¢ºèªã®ãŸã‚ã€ `publish-cli run` ã‚’é »ç¹ã«ä½¿ã„ã¾ã™ã€‚
æ¯å› `.build/release/publish-cli` ã¨å…¥åŠ›ã™ã‚‹ã®ã¯æ‰‹é–“ãªã®ã§ã€ `Makefile` ã«éš è”½ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚

```makefile:Makefile
PUBLISH_CLI_PATH := ./.build/release/publish-cli

.PHONY: setup
setup:
	$(MAKE) build-cli-tool

.PHONY: build-cli-tool
build-cli-tool:
	swift build -c release --product publish-cli

.PHONY: help
help:
	${PUBLISH_CLI_PATH} help

.PHONY: run
run:
	${PUBLISH_CLI_PATH} run

.PHONY: generate
generate:
	${PUBLISH_CLI_PATH} generate
```

ã“ã‚Œã§ `make run` ã‚„ `make generate` ã¨å®Ÿè¡Œã™ã‚‹ã ã‘ã§ `publish-cli` ã‚’ä½¿ãˆã¾ã™ã€‚
ç§ã¯ `new` ã¯æœ€åˆã®1å›ã®ã¿ã€ `deploy` ã¯ä½¿ã‚ãªã„ãŸã‚ã€ `Makefile` ã«å®šç¾©ã—ã¦ã„ã¾ã›ã‚“ã€‚

ã¤ã„ã§ã« `make setup` ã§CLIãƒ„ãƒ¼ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
ãƒ­ãƒ¼ã‚«ãƒ«ã‚„CIã§é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹éš›ã«ä¾¿åˆ©ã§ã™ã€‚

## ä½¿ã„æ–¹

### Webã‚µã‚¤ãƒˆã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

`publish-cli run` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Webã‚µã‚¤ãƒˆã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¦‹ã‚Œã¾ã™ã€‚

```shell-session
$ make run
./.build/release/publish-cli run
Building for debugging...
Build complete! (0.10s)
Publishing MyWebsite (6 steps)
[1/6] Copy 'Resources' files
[2/6] Add Markdown files from 'Content' folder
[3/6] Sort items
[4/6] Generate HTML
[5/6] Generate RSS feed
[6/6] Generate site map
âœ… Successfully published WebsiteSample
ğŸŒ Starting web server at http://localhost:8000

Press ENTER to stop the server and exit

```

Enterã‚­ãƒ¼ã‚’æŠ¼ä¸‹ã™ã‚‹ã¾ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§Webã‚µã‚¤ãƒˆã‚’å‚ç…§ã§ãã¾ã™ã€‚
http://localhost:8000

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2022-03-28 13.39.35.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/138245/d8bdfc62-93e7-e8e5-0418-5c07f8b55272.png)

Webã‚µã‚¤ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ¼ãƒï¼ˆ `foundation` ï¼‰ãŒã‚·ãƒ³ãƒ—ãƒ«ã§ã€ãªã‚“ã¨ãªãAppleã¿ã‚’æ„Ÿã˜ã¦å¥½ãã§ã™ã€‚

### æˆæœç‰©ã®ç”Ÿæˆ

`publish-cli generate` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ `Output` ãƒ•ã‚©ãƒ«ãƒ€ã«æˆæœç‰©ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

```shell-session
$ make generate 
./.build/release/publish-cli generate
Building for debugging...
Build complete! (0.09s)
Publishing WebsiteSample (5 steps)
[1/5] Add Markdown files from 'Content' folder
[2/5] Copy 'Resources' files
[3/5] Generate HTML
[4/5] Generate RSS feed
[5/5] Generate site map
âœ… Successfully published WebsiteSample
```

HTMLã‚„CSSã€RSSãªã©ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

```shell-session
$ tree Output/
Output/
â”œâ”€â”€ feed.rss
â”œâ”€â”€ index.html
â”œâ”€â”€ posts
â”‚   â”œâ”€â”€ first-post
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ sitemap.xml
â”œâ”€â”€ styles.css
â””â”€â”€ tags
    â”œâ”€â”€ article
    â”‚   â””â”€â”€ index.html
    â”œâ”€â”€ first
    â”‚   â””â”€â”€ index.html
    â””â”€â”€ index.html

5 directories, 9 files
```

`publish-cli run` ã§ã‚‚ç”Ÿæˆã•ã‚Œã¾ã™ãŒã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’æ­¢ã‚ã¦ã—ã¾ã†ãŸã‚ã€CIã§ä½¿ãˆã¾ã›ã‚“ã€‚
æˆæœç‰©ã‚’ç”Ÿæˆã™ã‚‹ã®ã¿ãªã‚‰ `publish-cli generate` ã‚’ä½¿ã†ã¹ãã§ã™ã€‚

### Webã‚µã‚¤ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤

`publish-cli deploy` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Webã‚µã‚¤ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚

ãŸã GitHub Actionsã§ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•åŒ–ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
ãŠãã‚‰ãèªè¨¼å‘¨ã‚ŠãŒåŸå› ã§ã™ãŒã€è§£æ±ºã§ãã¾ã›ã‚“ã§ã—ãŸã€‚

ãã®ãŸã‚ç§ã¯ `publish-cli deploy` ã‚’ä½¿ã‚ãš `publish-cli generate` ã§æˆæœç‰©ã‚’ç”Ÿæˆã—ã€ãã‚Œã‚’ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£è£½ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§GitHub Pagesã¸ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ãŒãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¾‹ã§ã™ã€‚

```yaml:deploy.yml
name: Deploy

on:
  push:
    branches: [ main ]

jobs:
  deploy-github-pages:
    runs-on: ubuntu-latest
    container: "swift:5.6"
    steps:
    - uses: actions/checkout@v3

    - name: Setup
      run: make setup

    - name: Generate the website
      run: make generate

    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        personal_token: ${{ secrets.PERSONAL_TOKEN }}
        external_repository: uhooi/uhooi.github.io
        publish_branch: master
        publish_dir: ./Output
```

`peaceiris/actions-gh-pages` ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è©³ç´°ã¯ã€GitHubã®READMEã‚’ã”å‚ç…§ãã ã•ã„ã€‚
https://github.com/peaceiris/actions-gh-pages

## å®Ÿè£…

### ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°

åŸºæœ¬çš„ã«ã¯ `Sources/{ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å}/main.swift` ã®1ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿æ›´æ–°ã—ã¾ã™ã€‚

GitHub Pagesã¸ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚
GitHub Pagesã®URLã¯ `http` ã ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§ `https` ã§æŒ‡å®šã—ã¾ã™ã€‚

```diff_swift:main.swift
struct WebsiteSample: Website {
    enum SectionID: String, WebsiteSectionID {
        case posts
    }

    struct ItemMetadata: WebsiteItemMetadata {
    }

-   var url = URL(string: "https://your-website-url.com")!
+   var url = URL(string: "https://uhooi.github.io")!
    var name = "WebsiteSample"
    var description = "A description of WebsiteSample"
    var language: Language { .english }
    var imagePath: Path? { nil }
}

- try WebsiteSample().publish(withTheme: .foundation)
+ try WebsiteSample().publish(using: [
+   .addMarkdownFiles(),
+   .copyResources(),
+   .generateHTML(withTheme: .foundation),
+   .generateRSSFeed(including: [.posts]),
+   .generateSiteMap(),
+   .deploy(using: .gitHub("uhooi/uhooi.github.io", useSSH: false))
+ ])
```

`.deploy(using:useSSH:)` ã¯ `branch:` ã‚‚æŒ‡å®šã§ãã‚‹ã®ã§ã™ãŒã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ä¸å…·åˆãŒã‚ã‚‹ãŸã‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆ `master` ï¼‰ã®ãƒ–ãƒ©ãƒ³ãƒã«ã—ã‹ãƒ—ãƒƒã‚·ãƒ¥ã§ãã¾ã›ã‚“ã€‚
å‚è€ƒï¼šhttps://github.com/JohnSundell/Publish/pull/116

`useSSH:` ã¯ `true` ãŒæ¨å¥¨ã§ã™ãŒã€CIã§ã®è¨­å®šãŒã‚ã‹ã‚‰ãªã„ãŸã‚ `false` ã«ã—ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚
ç§ã¯ `publish-cli deploy` ã‚’ä½¿ã£ã¦ã„ãªã„ã®ã§ã€ãŠãã‚‰ã `false` ã§ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

å¿…è¦ã«å¿œã˜ã¦åå‰ã‚„æ¦‚è¦ã€è¨€èªãªã©ã‚‚å¤‰æ›´ã—ã¾ã™ã€‚

```diff_swift:main.swift
struct WebsiteSample: Website {
    enum SectionID: String, WebsiteSectionID {
        case posts
    }

    struct ItemMetadata: WebsiteItemMetadata {
    }

    var url = URL(string: "https://uhooi.github.io")!
-   var name = "WebsiteSample"
-   var description = "A description of WebsiteSample"
-   var language: Language { .english }
+   var name = "THE Uhooi"
+   var description = "Uhooi's Website"
+   var language: Language { .japanese }
    var imagePath: Path? { nil }
}
```

`foundation` ãƒ†ãƒ¼ãƒã§ã¯ã€åå‰ã‚„æ¦‚è¦ã¯ä»¥ä¸‹ã«åæ˜ ã•ã‚Œã¾ã™ã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2022-03-28_16_34_57.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/138245/95512745-18d0-723c-8286-f81324a488bf.png)

### è¨˜äº‹ã®è¿½åŠ ã‚„æ›´æ–°

è¨˜äº‹ã¯ `.md` ãƒ•ã‚¡ã‚¤ãƒ«ã«Markdownè¨˜æ³•ã§æ›¸ãã¾ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ `Content/posts` ã®ä¸­ã« `.md` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ ¼ç´ã—ã¦ `run` ã‚„ `generate` ã™ã‚‹ã ã‘ã§è¨˜äº‹ãŒHTMLã§ç”Ÿæˆã•ã‚Œã¾ã™ã€‚ï¼ˆç°¡å˜ï¼ï¼‰

è¨˜äº‹ã®å½¢å¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```markdown:first-post.md
---
date: 2022-03-28 12:40
description: A description of my first post.
tags: first, article
---
# My first post

My first post's text.

...
```

ãƒ˜ãƒƒãƒ€ãƒ¼ã« `date` `description` `tags` ã‚’ä»˜ã‘ã¾ã™ã€‚
`date` ã¯ `YYYY-MM-DD hh:mm` ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€ `description` ã¯æ–‡å­—åˆ—ã€ `tags` ã¯ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®æ–‡å­—åˆ—ã§è¨˜è¿°ã—ã¾ã™ã€‚

ãƒ˜ãƒƒãƒ€ãƒ¼ä»¥ä¸‹ãŒæœ¬æ–‡ã«ãªã‚Šã¾ã™ã€‚
Markdownè¨˜æ³•ã‚’ä½¿ã£ã¦è¨˜è¿°ã—ã¾ã™ã€‚

ä¾‹ãˆã°ä»¥ä¸‹ã®Markdownã‚’ã‚‚ã¨ã«HTMLã‚’ç”Ÿæˆã—ã¾ã™ã€‚

````markdown:first-post.md
---
date: 2022-03-28 12:40
description: A description of my first post.
tags: first, article
---
# My first post

My first post's text.

## foo

foo.

### Swift

```swift
let foo = Foo()
```

```diff
- foo
+ bar
```

## bar

`bar` is code span.
_bar_ is italic.
__bar__ is bold.

- foo
- bar
  - test
  - test2

https://uhooi.github.io/

[https://uhooi.github.io/](https://uhooi.github.io/)
````

`foundation` ãƒ†ãƒ¼ãƒã ã¨ã“ã®ã‚ˆã†ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2022-03-29 10.59.33.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/138245/c97b3052-2208-24af-cd42-f440953bbd05.png)

ã„ã„æ„Ÿã˜ã§ã™ãŒã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ¼ãƒãªã®ã§ã€ã„ãã¤ã‹æ°—ã«ãªã‚‹ç®‡æ‰€ã‚‚ã‚ã‚Šã¾ã™ã€‚

- ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚Œãªã„
- ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‘ãƒ³ã¨ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®æ–‡å­—ã‚µã‚¤ã‚ºãŒå°ã•ã„
- ç®‡æ¡æ›¸ããŒã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã•ã‚Œãªã„
- ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¨ç®‡æ¡æ›¸ãã®å‰å¾Œã«ãƒãƒ¼ã‚¸ãƒ³ãŒãªã„
- URLãŒãƒªãƒ³ã‚¯ã«ãªã‚‰ãªã„

ã“ã‚Œã‚‰ã¯CSSä¿®æ­£ã®PRã‚’ä½œæˆã™ã‚‹ã®ã‚‚ã‚ã‚Šã ã¨æ€ã„ã¾ã™ãŒã€ã€Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ã¨ã„ã†ä»•çµ„ã¿ã§è§£æ±ºã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¤ã„ã¦ã¯ã¾ã å‹‰å¼·ä¸è¶³ã§ã‚ã‚Šã€æœ¬è¨˜äº‹ã¨ã¯åˆ¥ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ç´¹ä»‹ã—ãŸã„ã§ã™ã€‚

## ãŠã‚ã‚Šã«

ã“ã‚Œã§Swiftã¨Markdownã‚’ä½¿ã£ã¦Webã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ã§ãã¾ã—ãŸï¼
ãœã²ã¿ãªã•ã‚“ã‚‚è©¦ã—ã¦ã¿ã¦ãã ã•ã„ :relaxed:

## å‚è€ƒãƒªãƒ³ã‚¯

- [JohnSundell/Publish: A static site generator for Swift developers](https://github.com/JohnSundell/Publish)
- [Swiftã§ãƒ–ãƒ­ã‚°ã‚’ä½œã£ã¦GitHub Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ | DevelopersIO](https://dev.classmethod.jp/articles/generate-static-site-in_swift/)
